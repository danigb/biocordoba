- title "Listado de usuarios #{@role.title}"

.users
  %p.pink
    - if @users.empty?
      No existen usuarios de este tipo.
    - else
      %table.tablesorter{:cellspacing => "1", :cellpadding => "0", :border => "0"}
        %thead
          %tr
            = sorter_header "Empresa", "profiles.company_name", true
            = sorter_header "Nombre de usuario", "login"
            -# %th.header= "Email"
            %th= "Contraseña"
        %tbody
          - for user in @users
            %tr{:class => "#{cycle('odd', 'even')}"}
              %td= truncate(user.profile.company_name, :length => 20)
              %td= h user.login
              %td= h user.password
              %td
                = link_to "Editar", edit_user_path(user.id)
                = link_to "Eliminar", user_path(user.id, :type => params[:type]), :confirm => '¿Estás seguro?', :method => :delete unless user.login == "admin"


  = will_paginate @users
  %p
    %span.button.violet
      - if %w(1 2).include? @role.id.to_s
        = link_to "Crear nuevo usuario", new_admin_path(:user => {:role_id => @role.id})
      - else
        = link_to "Crear nuevo usuario", signup_path(:user => {:role_id => @role.id})
    o
    = link_to "Volver", users_path

